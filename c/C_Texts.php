<?phpclass C_Texts extends C_Admin_Base{	public function action_index(){        $this->action_all();    }    public function action_all(){        $this->title .= 'Статичные тексты';          $txt_num = isset($this->params[2]) ? (int)$this->params[2] : 1;		        $mPagination = new Pagination('texts', '/texts/all/');		$lang = I18n::language();        $texts = $mPagination->on_page(10)->page_num($txt_num)->left_join('i18n using(id_text)')							 ->where("i18n.is_show != '2' AND id_lang = '$lang'")->page();                $navbar = $this->Template('v_navbar.php', array('navparams' => $mPagination->navparams()));        $this->content = $this->Template('texts/v_all.php', array('texts' => $texts,                                                                       'navparams' => $mPagination->navparams(),                                                                       'navbar' => $navbar));    }	public function action_add(){        $this->title .= '::Добавление текста';        $this->scripts[] = 'ckeditor/ckeditor';        $this->scripts[] = 'ck_init';        $errors = array();        $mText = M_Texts::Instance();                $errors = array();        $fields = array('dt' => date("Y-m-d"));                if($this->isPost())        {           if($mText->add($_POST))                $this->redirect('/texts');            $fields = $_POST;            $errors = $mText->errors();        }            $this->content = $this->Template('texts/v_add.php',  array('messages' => $errors, 'fields' => $fields,                                         'errors' => $errors));     }        public function action_edit(){        $this->title .= '::Редактирование текста';        $this->scripts[] = 'ckeditor/ckeditor';        $this->scripts[] = 'ck_init';        $errors = array();        $mText = M_Texts::Instance();        $id_text = (int)$this->params[2];                if($this->isPost())        {              if($mText->edit($id_text, $_POST))                $this->redirect('/texts');            $fields = $_POST;            $errors = $mText->errors();        }        else            $fields = $mText->get($id_text);                $this->content = $this->Template('texts/v_edit.php',  array('messages' => $errors,                         'fields' => $fields, 'errors' => $errors));      }    public function action_delete(){        if($this->IsGet())        {            M_Texts::Instance()->delete($this->params[2]);            $this->redirect($_SERVER['HTTP_REFERER']); // т.к. удалять можем на разных страницах        }    }  }